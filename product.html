<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1">
        <title>Somnium</title>
        <link rel="stylesheet" href="http://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
        <link rel="stylesheet" href="style.css">
        <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>

        <style>
            .input-group {
              display: flex;
              align-items: center;
              margin-bottom: 10px;
            }
            
            .input-group input {
                margin-right: 10px;
                width: 500px;
                height: 32px;
                font-size: 15px;
                border: 0;
                border-radius: 15px;
                outline: none;
                padding-left: 10px;
                background-color: rgb(255, 255, 255);
                border-radius: 10px;
                border: 1px solid var(--main-color);
            }

            .Scope1_main {
                background: rgb(233, 233, 233);
                outline: none;
                border-radius: 10px;
                padding: .5rem 1rem;
                margin-bottom : 2rem;

            }

            .Scope1_main > h3 {
                text-align: center;
            } 

            .Scope2_main {
                background: rgb(233, 233, 233);
                outline: none;
                border-radius: 10px;
                padding: .5rem 1rem;
                margin-bottom : 2rem;
            }

            .Scope2_main > input {
                background: rgb(255, 255, 255);
                outline: none;
                border-radius: 10px;
                padding: .5rem 1rem;
                margin-bottom : 2rem;
                border: 1px solid var(--main-color);
            }
            
            .Scope2_main button {
                background: var(--main-color);
                border-radius: 10px;
                color: #fff;
                font-size: .8rem;
                padding: .5rem 1rem;
                border: 1px solid var(--main-color);
                cursor : pointer;
            }

            .Scope3_main {
                background: rgb(233, 233, 233);
                outline: none;
                border-radius: 10px;
                padding: .5rem 1rem;
                margin-bottom : 2rem;
            }

            .Scope3_main button {
                background: var(--main-color);
                border-radius: 10px;
                color: #fff;
                font-size: .8rem;
                padding: .5rem 1rem;
                border: 1px solid var(--main-color);
                cursor : pointer;
            }

            .Analysis_main {
                background: rgb(233, 233, 233);
                outline: none;
                border-radius: 10px;
                padding: .5rem 1rem;
                margin-bottom : 2rem;
            }

            .write > button {
                background: var(--main-color);
                border-radius: 10px;
                color: #fff;
                font-size: .8rem;
                padding: .5rem 1rem;
                border: 1px solid var(--main-color);
                cursor : pointer;
            }
        </style>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
  $(document).ready(function() {
    $('#calculateBtn').click(function() {
      var distance = $('#distanceInput').val(); // 입력된 거리 가져오기

      // API 요청 보내기
      $.ajax({
        url: 'https://beta4.api.climatiq.io/estimate', // API 엔드포인트 URL
        type: 'POST',
        headers: {
          'Authorization': 'Bearer 8VN3B3PV99MTM7HK4WHTFVSWJ5DB' // 여기에 실제 API 키를 입력
        },
        data: JSON.stringify({
          "emission_factor": {
            "activity_id": "passenger_vehicle-vehicle_type_car-fuel_source_na-engine_size_na-vehicle_age_na-vehicle_weight_na",
            "source": "ADEME",
            "region": "FR",
            "year": 2021,
            "source_lca_activity": "unknown",
            "data_version": "^1"
          },
          "parameters": {
            "distance": parseFloat(distance), // 거리를 숫자로 변환하여 전달
            "distance_unit": "km"
          }
        }),
        contentType: 'application/json',

        success: function(response) {
          // API 응답 받았을 때 실행되는 함수
          var responseData = response; // 이미 JSON 형식으로 파싱되었으므로 파싱 과정 생략
          $('#result').text(responseData.co2e); // CO2 배출량 화면에 표시
        },

        error: function(xhr, status, error) {
          // 요청 실패 시 실행되는 함수
          console.log(error);
        }
      });
    });
  });

  function calculateElectricity() {
    // Get the input value
    var input = document.getElementById("use-Electricity").value;

    if (input == "") {
      // 아무것도 입력하지 않은 경우 사용한 전기량을 입력하지 않았다고 한다
      document.getElementById("electricityResult").textContent = "사용한 전기량(kw)을 입력하세요.";
    } else if (input<0) {
        document.getElementById("electricityResult").textContent = "잘못된 입력입니다. 양수 값을 입력해주세요.";
    } else {
      // input에 값이 입력되었을 경우 이산화탄소 환산량을 계산 및 화면에 출력한다
      var result = (input * 0.424).toFixed(2);
      document.getElementById("electricityResult").textContent = "배출한 이산화탄소 환산량은 " + result + "KgCO2e 입니다";
    }
  }

</script>
    </head>
    <body>

        <input type="checkbox" id="nav-toggle">
        <div class="sidebar">
            <div class="sidebar-brand">
                <h2><span class="lab la-accusoft"></span> <span>Somnium</span></h2>
            </div>
            
            <div class="sidebar-menu">
                <ul>
                    <li>
                        <a href="main.html"><span class="las la-igloo"></span>
                            <span>Dashboard</span></a>
                    </li>                 
                    <li>
                        <a href="product.html" class="active"><span class="las la-shopping-bag"></span>
                            <span>Product</span></a>
                    </li>
                    <li>
                        <a href="analyze.html"><span class="las la-receipt"></span>
                            <span>Analyze</span></a>
                    </li>
                    <li>
                        <a href="accounts.html"><span class="las la-user-circle"></span>
                            <span>Accounts</span></a>
                    </li>
                    <li>
                        <a href="employee.html"><span class="las la-users"></span>
                            <span>Employee</span></a>
                    </li>
                    <li>
                        <a href="Tasks.html"><span class="las la-clipboard-list"></span>
                            <span>Tasks</span></a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="main-content">
            <header>
                <h2>
                    <label for="nav-toggle">
                        <span class="las la-bars" style="cursor : pointer;"></span>
                    </label>
                    Product
                </h2>

                <div class="search-wrapper">
                    <span class="las la-search"></span>
                    <input type="search" placeholder="Search here" />
                </div>

                <div class="user-wrapper">
                    <!--<img src="img/2.jpg" width="40px" height="40px" alt="">-->
                    <div>
                        <h4>Non User</h4>
                        <small>Please to Login</small>
                    </div>
                </div>
            </header>
            
            <main>
                <div class = "Scope1">
                    <h2>
                        Scope 1 탄소배출량
                    </h2>

                    <div class = "Scope1_main">         
                        <img class="penguin" src = "penguin300.png" style="margin-left: auto; margin-right: auto; display: block;" width = "300px", height = "auto">

                        
                    </div>
                </div>

                <div class = "Scope2">
                    <h2>
                        Scope 2 탄소배출량
                    </h2>
                    <h4 style="color : #495057; padding-bottom : 0.5rem;">
                        Scope 2에서는 사용한 전력량에 대한 탄소배출량을 알아봅니다.
                    </h4>
                    <div class = "Scope2_main" >
                        <h4>
                            현재 한전의 CO2 배출 계산기 기준 전기 1kw당 CO2 배출량은 0.424kg 입니다.
                        </h4><br>

                        <input type="number" id="use-Electricity" placeholder="사용한 전기를 입력하세요(kw)" />
                        <button onclick="calculateElectricity()">계산하기</button>
                        <h2 id="electricityResult"></h2>
                </div>

                <div class = "Scope3">
                    <h2>
                        Scope 3 탄소배출량
                    </h2>
                    <h3>
                        Scope 3 에서는 UpStream과 DownStream 중 DownStream에서 발생하는 탄소 배출량을 알아봅니다.
                    </h3>
                    <div class = "Scope3_main">
                        <h4>
                        </h4>
                            <div id="map"></div>
                            <div id="destination-container">
                                <div class="input-group">
                                    <input type="text" placeholder="출발지">
                                    <input type="text" placeholder="도착지">
                                </div>
                            </div>

                            <!--<button onclick="addDestination()">추가</button>  
                            <div class = "total_cal" style="padding-top : 0.5rem; color : #0099ff;">
                                <h3>누적 총합 : </h3>
                            </div> -->
                    </div>
                </div>

                <div class = "Analysis">
                    <div class = "write" style="display: flex; align-items: center;">
                        <h2 style="flex: 1;">
                            전체 분석
                        </h2>
                        <button style="position: right;">결과 확인</button>
                    </div>
                    <div class = "Analysis_main">
                        <img class="penguin" src = "penguin300.png" style="margin-left: auto; margin-right: auto; display: block;" width = "300px", height = "auto">
                    </div>
                </div>



                <div class = "last-memo">
                    <h4>© Somnium Corp. All rights reserved.</h4>
                </div>
            </main>
        </div>
    </body>
</html>